<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<GridPane xmlns="http://javafx.com/javafx/21"
          xmlns:fx="http://javafx.com/fxml/1"
          fx:controller="com.avitech.sia.iu.LoginController"
          stylesheets="@/css/theme.css"
          prefWidth="1920" prefHeight="1080"
          styleClass="login-root">

    <!-- 2 columnas: 58% (branding) / 42% (form) -->
    <columnConstraints>
        <ColumnConstraints percentWidth="58" hgrow="ALWAYS"/>
        <ColumnConstraints percentWidth="42" hgrow="ALWAYS"/>
    </columnConstraints>
    <rowConstraints>
        <RowConstraints vgrow="ALWAYS"/>
    </rowConstraints>

    <!-- ===== LEFT: BRANDING ===== -->
    <StackPane GridPane.columnIndex="0" styleClass="login-left">
        <children>
            <VBox alignment="CENTER" spacing="14">
                <children>
                    <Label text="AVITECH" styleClass="login-brand"/>
                    <Label text="Sistema de Información Avícola" styleClass="login-sub"/>
                    <Label text="Control, producción y trazabilidad en un solo click" styleClass="login-caption"/>
                </children>
            </VBox>
        </children>
        <padding><Insets top="0" right="40" bottom="0" left="40"/></padding>
    </StackPane>

    <!-- ===== RIGHT: FORM ===== -->
    <StackPane GridPane.columnIndex="1" styleClass="login-right">
        <children>
            <!-- VBox centrado vertical y horizontalmente -->
            <VBox alignment="CENTER" spacing="20" maxWidth="520">
                <children>

                    <Label text="Iniciar Sesión" styleClass="login-title"/>

                    <Label text="Ingrese sus credenciales para acceder" styleClass="helper"/>

                    <!-- Usuario -->
                    <VBox spacing="6" maxWidth="Infinity">
                        <children>
                            <Label text="Usuario *" styleClass="input-label"/>
                            <TextField fx:id="txtUser" promptText="Ingrese su usuario"
                                       maxWidth="Infinity" styleClass="input"/>
                        </children>
                    </VBox>

                    <!-- Contraseña + botón ojo (a la derecha) -->
                    <!-- Contraseña + botón ojo (a la derecha) -->
                    <VBox spacing="6" maxWidth="Infinity">
                        <children>
                            <Label text="Contraseña *" styleClass="input-label"/>
                            <HBox spacing="6" alignment="CENTER_LEFT" maxWidth="Infinity">
                                <children>
                                    <!-- Se muestran de a uno: el otro queda invisible y no ocupa espacio -->
                                    <PasswordField fx:id="txtPass"
                                                   promptText="Ingrese su contraseña"
                                                   HBox.hgrow="ALWAYS"
                                                   styleClass="input"/>

                                    <TextField fx:id="txtPassPlain"
                                               promptText="Ingrese su contraseña"
                                               visible="false" managed="false"
                                               HBox.hgrow="ALWAYS"
                                               styleClass="input"/>

                                    <Button fx:id="btnTogglePass"
                                            onAction="#togglePassword"
                                            focusTraversable="false"
                                            text="👁"
                                            styleClass="eye-btn"/>
                                </children>
                            </HBox>
                        </children>
                    </VBox>

                    <!-- Botón ingresar -->
                    <Button fx:id="btnLogin" text="Ingresar" onAction="#doLogin"
                            maxWidth="Infinity" prefHeight="44" styleClass="primary"/>

                    <!-- Mensaje de error (oculto por defecto) -->
                    <Label fx:id="lblError" text="" visible="false" managed="false" styleClass="error-msg"/>

                    <!-- Nota inferior -->
                    <Label text="Versión académica — uso offline con base de datos MySQL"
                           styleClass="login-footnote"/>
                </children>
                <padding><Insets top="0" right="36" bottom="0" left="36"/></padding>
            </VBox>
        </children>
    </StackPane>

</GridPane>
