<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<StackPane xmlns:fx="http://javafx.com/fxml"
           fx:id="overlayHost"
           fx:controller="com.avitech.sia.iu.parametros.ParametrosController">

<BorderPane>
    <!-- SIDEBAR (igual a las otras pantallas) -->
    <left>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" prefWidth="270" styleClass="side-scroll">
            <content>
                <VBox fx:id="sidebar" spacing="10" styleClass="sidebar" prefWidth="270">
                    <children>
                        <Label text="Menú Principal" styleClass="sidebar-title"/>
                        <fx:define>
                            <ToggleGroup fx:id="sideGroup"/>
                        </fx:define>

                        <ToggleButton text="Tablero"     toggleGroup="$sideGroup" onAction="#goDashboard"  styleClass="side-btn"/>
                        <ToggleButton text="Suministros" toggleGroup="$sideGroup" onAction="#goSupplies"   styleClass="side-btn"/>
                        <ToggleButton text="Sanidad"     toggleGroup="$sideGroup" onAction="#goHealth"     styleClass="side-btn"/>
                        <ToggleButton text="Producción"  toggleGroup="$sideGroup" onAction="#goProduction" styleClass="side-btn"/>
                        <ToggleButton text="Reportes"    toggleGroup="$sideGroup" onAction="#goReports"    styleClass="side-btn"/>
                        <ToggleButton text="Alertas"     toggleGroup="$sideGroup" onAction="#goAlerts"     styleClass="side-btn"/>
                        <ToggleButton text="Auditoría"   toggleGroup="$sideGroup" onAction="#goAudit"      styleClass="side-btn"/>
                        <ToggleButton text="Parámetros"  toggleGroup="$sideGroup" styleClass="side-btn active" selected="true"/>
                        <ToggleButton text="Usuarios"    toggleGroup="$sideGroup" onAction="#goUsers"      styleClass="side-btn"/>
                        <ToggleButton text="Respaldos"   toggleGroup="$sideGroup" onAction="#goBackup"     styleClass="side-btn"/>

                        <Region VBox.vgrow="ALWAYS"/>
                        <Label text="Usuario del sistema" styleClass="sidebar-subtitle"/>
                        <Label fx:id="lblUserInfo" text="Administrador" styleClass="sidebar-user"/>
                        <Button text="Cerrar sesión" onAction="#onExit" styleClass="side-logout"/>
                    </children>
                    <padding><Insets topRightBottomLeft="16"/></padding>
                </VBox>
            </content>
        </ScrollPane>
    </left>

    <!-- TOP BAR -->
    <top>
        <HBox spacing="12" styleClass="topbar">
            <children>
                <Label text="AVITECH — SIA" styleClass="topbar-brand"/>
                <Pane HBox.hgrow="ALWAYS"/>
                <Label fx:id="lblSystemStatus" text="Sistema Offline – MySQL Local" styleClass="topbar-status"/>
                <Separator orientation="VERTICAL"/>
                <Label fx:id="lblHeader" text="Administrador"/>
                <Button text="↩ Volver" onAction="#goDashboard" styleClass="ghostBtn"/>
            </children>
            <padding><Insets topRightBottomLeft="10"/></padding>
        </HBox>
    </top>

    <!-- CONTENIDO -->
    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER">
            <content>
                <VBox spacing="18" styleClass="content">
                    <children>
                        <Label text="Parámetros del Sistema" styleClass="h2"/>
                        <Label text="Configuración de unidades, categorías, medicamentos, lotes y ubicaciones" styleClass="helper"/>

                        <!-- Segmentos mejorados con iconos y diseño moderno -->
                        <VBox spacing="12">
                            <Label text="Seleccione una sección:" styleClass="helper" style="-fx-font-weight: 600;"/>

                            <fx:define>
                                <ToggleGroup fx:id="tabGroup"/>
                            </fx:define>

                            <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-wrap-text: true;">
                                <children>
                                    <ToggleButton fx:id="btnUnidades" onAction="#showUnidades" selected="true"
                                                  toggleGroup="$tabGroup"
                                                  styleClass="tab-segment" prefWidth="160" prefHeight="70">
                                        <graphic>
                                            <VBox alignment="CENTER" spacing="4">
                                                <Label text="📏" style="-fx-font-size: 24px;"/>
                                                <Label text="Unidades" style="-fx-font-weight: 600; -fx-font-size: 13px;"/>
                                                <Label text="Medidas" style="-fx-font-size: 10px; -fx-opacity: 0.7;"/>
                                            </VBox>
                                        </graphic>
                                    </ToggleButton>

                                    <ToggleButton fx:id="btnCategorias" onAction="#showCategorias"
                                                  toggleGroup="$tabGroup"
                                                  styleClass="tab-segment" prefWidth="160" prefHeight="70">
                                        <graphic>
                                            <VBox alignment="CENTER" spacing="4">
                                                <Label text="🏷️" style="-fx-font-size: 24px;"/>
                                                <Label text="Categorías" style="-fx-font-weight: 600; -fx-font-size: 13px;"/>
                                                <Label text="Clasificación" style="-fx-font-size: 10px; -fx-opacity: 0.7;"/>
                                            </VBox>
                                        </graphic>
                                    </ToggleButton>

                                    <ToggleButton fx:id="btnMedicamentos" onAction="#showMedicamentos"
                                                  toggleGroup="$tabGroup"
                                                  styleClass="tab-segment" prefWidth="160" prefHeight="70">
                                        <graphic>
                                            <VBox alignment="CENTER" spacing="4">
                                                <Label text="💊" style="-fx-font-size: 24px;"/>
                                                <Label text="Medicamentos" style="-fx-font-weight: 600; -fx-font-size: 13px;"/>
                                                <Label text="Veterinarios" style="-fx-font-size: 10px; -fx-opacity: 0.7;"/>
                                            </VBox>
                                        </graphic>
                                    </ToggleButton>

                                    <ToggleButton fx:id="btnLotes" onAction="#showLotes"
                                                  toggleGroup="$tabGroup"
                                                  styleClass="tab-segment" prefWidth="160" prefHeight="70">
                                        <graphic>
                                            <VBox alignment="CENTER" spacing="4">
                                                <Label text="🐔" style="-fx-font-size: 24px;"/>
                                                <Label text="Lotes" style="-fx-font-weight: 600; -fx-font-size: 13px;"/>
                                                <Label text="Aves" style="-fx-font-size: 10px; -fx-opacity: 0.7;"/>
                                            </VBox>
                                        </graphic>
                                    </ToggleButton>

                                    <ToggleButton fx:id="btnUbicaciones" onAction="#showUbicaciones"
                                                  toggleGroup="$tabGroup"
                                                  styleClass="tab-segment" prefWidth="160" prefHeight="70">
                                        <graphic>
                                            <VBox alignment="CENTER" spacing="4">
                                                <Label text="📍" style="-fx-font-size: 24px;"/>
                                                <Label text="Ubicaciones" style="-fx-font-weight: 600; -fx-font-size: 13px;"/>
                                                <Label text="Espacios" style="-fx-font-size: 10px; -fx-opacity: 0.7;"/>
                                            </VBox>
                                        </graphic>
                                    </ToggleButton>
                                </children>
                            </HBox>
                        </VBox>

                        <!-- Contenedor de sub-vistas -->
                        <StackPane fx:id="contentStack" VBox.vgrow="ALWAYS" />
                    </children>
                    <padding><Insets topRightBottomLeft="16"/></padding>
                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>

</StackPane>

