<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<StackPane xmlns="http://javafx.com/javafx/21"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:id="modalRoot"
           fx:controller="com.avitech.sia.iu.parametros.NuevoMedicamentoController"
           styleClass="modal-root">

    <!-- overlay -->
    <Pane styleClass="modal-overlay" pickOnBounds="true" StackPane.alignment="CENTER"/>

    <!-- card -->
    <BorderPane
            minWidth="600"
            prefWidth="${modalRoot.width - 80}"
            maxWidth="850"
            minHeight="500"
            prefHeight="${modalRoot.height - 100}"
            maxHeight="750"
            styleClass="modal-card"
            StackPane.alignment="CENTER">

        <!-- header -->
        <top>
            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="modal-header">
                <children>
                    <Label fx:id="lblTitle" text="Nuevo Medicamento" styleClass="h3"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button fx:id="btnClose" text="✕" styleClass="ghostBtn"/>
                </children>
                <padding><Insets topRightBottomLeft="12"/></padding>
            </HBox>
        </top>

        <!-- body -->
        <center>
            <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
                <content>
                    <VBox spacing="16" fillWidth="true" maxWidth="Infinity" styleClass="content">
                        <children>

                            <Label text="Complete los datos del medicamento o producto veterinario" styleClass="helper"/>

                            <GridPane hgap="12" vgap="14">
                                <columnConstraints>
                                    <ColumnConstraints minWidth="150"/>
                                    <ColumnConstraints hgrow="ALWAYS"/>
                                    <ColumnConstraints minWidth="150"/>
                                    <ColumnConstraints hgrow="ALWAYS"/>
                                </columnConstraints>

                                <!-- Fila 1 -->
                                <Label text="Nombre Comercial *" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                <TextField fx:id="txtNombre" promptText="Ej: Enrofloxacina 10%"
                                          GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                                <Label text="Principio Activo *" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                                <TextField fx:id="txtPrincipioActivo" promptText="Ej: Enrofloxacina"
                                          GridPane.rowIndex="0" GridPane.columnIndex="3"/>

                                <!-- Fila 2 -->
                                <Label text="Tipo *" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                <ComboBox fx:id="cbTipo" promptText="Seleccionar tipo"
                                         GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                                <Label text="Presentación" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                                <TextField fx:id="txtPresentacion" promptText="Ej: Frasco 100ml"
                                          GridPane.rowIndex="1" GridPane.columnIndex="3"/>

                                <!-- Fila 3 -->
                                <Label text="Dosis Recomendada *" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                                <TextField fx:id="txtDosis" promptText="Ej: 10mg/kg peso vivo"
                                          GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                                <Label text="Tiempo de Retiro *" GridPane.rowIndex="2" GridPane.columnIndex="2"/>
                                <HBox spacing="8" alignment="CENTER_LEFT" GridPane.rowIndex="2" GridPane.columnIndex="3">
                                    <TextField fx:id="txtRetiroDias" promptText="0" prefWidth="80"/>
                                    <Label text="días"/>
                                </HBox>

                                <!-- Fila 4 -->
                                <Label text="Fabricante" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                                <TextField fx:id="txtFabricante" promptText="Nombre del fabricante"
                                          GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                                <Label text="Lote/Registro Sanitario" GridPane.rowIndex="3" GridPane.columnIndex="2"/>
                                <TextField fx:id="txtRegistro" promptText="Número de registro"
                                          GridPane.rowIndex="3" GridPane.columnIndex="3"/>

                                <!-- Fila 5 -->
                                <Label text="Estado *" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                                <ComboBox fx:id="cbEstado" promptText="Seleccionar estado"
                                         GridPane.rowIndex="4" GridPane.columnIndex="1"/>

                                <!-- Indicaciones (span completo) -->
                                <Label text="Indicaciones de uso" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                                <TextArea fx:id="txtIndicaciones" promptText="Indicaciones y precauciones (opcional)"
                                         prefRowCount="3" GridPane.rowIndex="5" GridPane.columnIndex="1" GridPane.columnSpan="3"/>
                            </GridPane>

                            <!-- nota -->
                            <VBox styleClass="note-info">
                                <children>
                                    <Label text="Nota importante:" styleClass="note-title"/>
                                    <Label text="El tiempo de retiro es el periodo que debe transcurrir entre la última aplicación del medicamento y la comercialización de huevos o carne. Es obligatorio para medicamentos de uso veterinario."
                                           wrapText="true"/>
                                </children>
                            </VBox>

                        </children>
                        <padding><Insets topRightBottomLeft="16"/></padding>
                    </VBox>
                </content>
            </ScrollPane>
        </center>

        <!-- footer -->
        <bottom>
            <HBox spacing="10" alignment="CENTER_RIGHT" styleClass="modal-footer">
                <children>
                    <Button fx:id="btnCancelar" text="Cancelar" styleClass="secondaryBtn"/>
                    <Button fx:id="btnGuardar" text="Guardar" styleClass="primaryBtn"/>
                </children>
                <padding><Insets topRightBottomLeft="12"/></padding>
            </HBox>
        </bottom>

    </BorderPane>

</StackPane>

